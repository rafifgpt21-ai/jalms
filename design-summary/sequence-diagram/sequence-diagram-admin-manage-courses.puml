@startuml
title Manage Courses Sequence Diagram
autonumber

actor "Admin" as Admin
participant "Web Client" as Client
participant "Admin" as AdminClass
participant "Course" as Course
database "Database" as Database

' View Courses Flow
Admin -> Client: View Courses List
activate Client
Client -> AdminClass: getCourses()
activate AdminClass
AdminClass -> Course: findMany()
activate Course
Course -> Database: SELECT * FROM Course...
activate Database
Database --> Course: Course[]
deactivate Database
Course --> AdminClass: Course[]
deactivate Course
AdminClass --> Client: Course[]
deactivate AdminClass
Client --> Admin: Display List of Courses
deactivate Client

' User Action Choices
alt Create Course
    Admin -> Client: Click "Add Course"
    activate Client
    Client --> Admin: Display Create Form
    deactivate Client

    Admin -> Client: Fill Details & Submit
    activate Client
    note right of Admin: Title, Department, etc.

    Client -> AdminClass: createCourse(data)
    activate AdminClass
    AdminClass -> AdminClass: Validate Data
    activate AdminClass
    deactivate AdminClass

    opt Validation Pass
        AdminClass -> Course: create({ data })
        activate Course
        Course -> Database: INSERT INTO Course...
        activate Database
        Database --> Course: Created Course
        deactivate Database
        Course --> AdminClass: Course Object
        deactivate Course
        AdminClass --> Client: Success Response
        Client --> Admin: Show Success & Refresh List
    else Validation Fail
        AdminClass --> Client: Error Response
        Client --> Admin: Show Error Message
    end
    deactivate AdminClass
    deactivate Client

else Edit Course
    Admin -> Client: Click "Edit" on Course
    activate Client
    Client -> AdminClass: getCourse(id)
    activate AdminClass
    AdminClass -> Course: findUnique({ where: { id } })
    activate Course
    Course -> Database: SELECT * FROM Course...
    activate Database
    Database --> Course: Course Data
    deactivate Database
    Course --> AdminClass: Course Data
    deactivate Course
    AdminClass --> Client: Course Data
    deactivate AdminClass
    Client --> Admin: Display Edit Form with Data
    deactivate Client

    Admin -> Client: Update Details & Submit
    activate Client
    Client -> AdminClass: updateCourse(id, data)
    activate AdminClass
    AdminClass -> AdminClass: Validate Data
    activate AdminClass
    deactivate AdminClass

    opt Validation Pass
        AdminClass -> Course: update({ where: { id }, data })
        activate Course
        Course -> Database: UPDATE Course...
        activate Database
        Database --> Course: Updated Course
        deactivate Database
        Course --> AdminClass: Course Object
        deactivate Course
        AdminClass --> Client: Success Response
        Client --> Admin: Show Success & Refresh List
    else Validation Fail
        AdminClass --> Client: Error Response
        Client --> Admin: Show Error Message
    end
    deactivate AdminClass
    deactivate Client

else Delete Course
    Admin -> Client: Click "Delete" on Course
    activate Client
    Client --> Admin: Confirm Deletion?
    deactivate Client
    
    Admin -> Client: Confirm Yes
    activate Client
    Client -> AdminClass: deleteCourse(id)
    activate AdminClass
    AdminClass -> Course: delete({ where: { id } })
    activate Course
    Course -> Database: DELETE FROM Course...
    activate Database
    Database --> Course: Success
    deactivate Database
    Course --> AdminClass: Success
    deactivate Course
    AdminClass --> Client: Success Response
    deactivate AdminClass
    Client --> Admin: Show Success & Refresh List
    deactivate Client
end

@enduml
