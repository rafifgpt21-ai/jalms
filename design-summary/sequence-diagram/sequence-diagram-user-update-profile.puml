@startuml
title Update Profile Sequence Diagram
autonumber

actor "User" as User
participant "Web Client" as UI
participant "Server Action" as Action
participant "Prisma ORM" as Prisma
database "Database" as DB

User -> UI: Edit Profile
activate UI
UI --> User: Display Profile Form
deactivate UI

User -> UI: Update Info/Avatar
activate UI
UI -> Action: updateProfile(data)
activate Action

opt Has Avatar
    Action -> Action: Upload File to Storage
    activate Action
    deactivate Action
end

Action -> Prisma: update({ where: { id }, data })
activate Prisma
Prisma -> DB: UPDATE User...
activate DB
DB --> Prisma: Updated User
deactivate DB
Prisma --> Action: User Object
deactivate Prisma
Action --> UI: Success Response
UI --> User: Profile Updated
deactivate Action
deactivate UI

@enduml
