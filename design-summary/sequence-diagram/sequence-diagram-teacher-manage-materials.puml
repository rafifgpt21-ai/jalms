@startuml
title Manage Materials Sequence Diagram
autonumber

actor "Teacher" as Teacher
participant "Web Client" as Client
participant "Teacher" as TeacherClass
participant "Material" as Material
database "Database" as Database

group Upload Material
    Teacher -> Client: Upload Material
    activate Client
    Client -> TeacherClass: createMaterial(file, metadata)
    activate TeacherClass
    TeacherClass -> TeacherClass: Upload File
    activate TeacherClass
    deactivate TeacherClass
    TeacherClass -> Material: create({ data })
    activate Material
    Material -> Database: INSERT INTO Material...
    activate Database
    Database --> Material: Success
    deactivate Database
    Material --> TeacherClass: Success
    deactivate Material
    TeacherClass --> Client: Success
    Client --> Teacher: Material Uploaded
    deactivate TeacherClass
    deactivate Client
end

group Assign Material to Course
    Teacher -> Client: Click "Assign" on Material
    activate Client
    Teacher -> Client: Search for Course
    Client -> TeacherClass: searchTeacherCourses(query)
    activate TeacherClass
    TeacherClass -> Material: findMany(Course)
    activate Material
    Material -> Database: SELECT Courses...
    activate Database
    Database --> Material: Course List
    deactivate Database
    Material --> TeacherClass: Course List
    deactivate Material
    TeacherClass --> Client: Display Course Options
    deactivate TeacherClass

    Teacher -> Client: Select Course
    Client -> TeacherClass: assignMaterialToCourse(materialId, courseId)
    activate TeacherClass
    TeacherClass -> Material: create(MaterialAssignment)
    activate Material
    Material -> Database: INSERT INTO MaterialAssignment...
    activate Database
    Database --> Material: Success
    deactivate Database
    Material --> TeacherClass: Success
    deactivate Material
    TeacherClass --> Client: Success
    Client --> Teacher: Material Assigned
    deactivate TeacherClass
    deactivate Client
end

@enduml
