@startuml
title Login Sequence Diagram
autonumber

actor "User" as User
participant "Web Client" as Client
participant "User" as UserClass
participant "User" as UserEntity
database "Database" as Database

User -> Client: Enter Email & Password
activate Client

Client -> UserClass: POST /api/auth/signin
activate UserClass

UserClass -> UserEntity: findUnique({ where: { email } })
activate UserEntity

UserEntity -> Database: SELECT * FROM User WHERE email = ?
activate Database

Database --> UserEntity: User Record
deactivate Database

UserEntity --> UserClass: User Data
deactivate UserEntity

UserClass -> UserClass: Verify Password (Hash Comparison)
activate UserClass
deactivate UserClass

alt Credentials Valid
    UserClass -> UserClass: Create Session / Sign JWT
    activate UserClass
    deactivate UserClass
    
    UserClass --> Client: 200 OK (Session/Token)
    Client --> User: Redirect to Dashboard
else Credentials Invalid
    UserClass --> Client: 401 Unauthorized
    Client --> User: Show "Invalid Email or Password" Error
end

deactivate UserClass
deactivate Client

@enduml
